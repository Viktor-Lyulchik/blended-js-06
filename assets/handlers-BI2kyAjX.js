import{i as _,a as m}from"./vendor-Cbhu4xvy.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}})();const r={catList:document.querySelector("ul.categories"),prodList:document.querySelector("ul.products"),divNotFound:document.querySelector("div.not-found"),loadMoreBtn:document.querySelector("button.load-more"),loader:document.querySelector(".loader"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),modalProduct:document.querySelector("div.modal-product"),searchForm:document.querySelector("form.search-form"),clearSearchBtn:document.querySelector("button.search-form__btn-clear"),addToCartBtn:document.querySelector("button.modal-product__btn--cart"),addToWishListBtn:document.querySelector("button.modal-product__btn--wishlist"),spanNavCart:document.querySelector("span[data-cart-count]"),spanNavWishList:document.querySelector("span[data-wishlist-count]"),spanCartDataCount:document.querySelector("span[data-count]"),spanCartDataPrice:document.querySelector("span[data-price]"),cartBuyBtn:document.querySelector("button.cart-summary__btn"),goToTopOfListBtn:document.querySelector("button.go-to-top-of-list"),changeThemeBtn:document.querySelector("button.theme-toggle-button"),body:document.querySelector("body"),decreaseBtn:document.querySelector("button.decrease-btn"),increaseBtn:document.querySelector("button.increase-btn"),productQuantity:document.querySelector("input.product-quantity")};function D(t){r.catList.innerHTML=t.map(e=>`<li class="categories__item">
                 <button class="categories__btn" type="button">${e}</button>
              </li>`).join("")}function b(t,e=!1){const o=t.map(({id:n,title:a,brand:s,category:f,price:L,description:I,images:[W="/"]})=>`<li class="products__item" data-id="${n}" data-price="${L}">
                <img class="products__image" src="${W}" alt="${I}"/>
                <p class="products__title">${a}</p>
                <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
                <p class="products__category">Category: ${f}</p>
                <p class="products__price">Price: ${L}$</p>
             </li>`).join("");e?r.prodList.insertAdjacentHTML("beforeend",o):r.prodList.innerHTML=o}function R({title:t,tags:e,shippingInformation:o,price:n,description:a,returnPolicy:s,images:[f="/"]}){const L=`<img class="modal-product__img" src="${f}" alt="${a}" />
                  <div class="modal-product__content">
                      <p class="modal-product__title">${t}</p>
                      <ul class="modal-product__tags">${e.join()}</ul>
                      <p class="modal-product__description">${a}</p>
                      <p class="modal-product__shipping-information">Shipping:${o}</p>
                      <p class="modal-product__return-policy">Return Policy:${s}</p>
                      <p class="modal-product__price">Price: ${n}$</p>
                      
                  </div>`;r.modalProduct.innerHTML=L}_.settings({position:"topRight"});function y(t){_.error({title:"Error",message:t})}function N(t){_.info({message:t})}function g(t,e){localStorage.setItem(t,JSON.stringify(e))}function u(t,e=""){const o=localStorage.getItem(t);let n=e;if(o)try{n=JSON.parse(o)}catch(a){n=e,console.error("Error restoring data from the localStorage:",a)}return n}const c={cart:"cart",wishlist:"wishlist",theme:"theme"};m.defaults.baseURL="https://dummyjson.com/products/";let h=1,C=0;async function j(){return(await m.get("category-list")).data}async function H(t,e){return(await m.get("category/"+t.trim(),{params:{limit:12,skip:(e-1)*12}})).data}async function U(t){return(await m.get(t.trim())).data}async function J(t){return(await m.get("search",{params:{q:t}})).data}async function K(t){return(await m.get("",{params:{limit:12,skip:(t-1)*12}})).data}function ot(){const e=u(c.wishlist,[]).map(o=>m.get(o.trim()));Promise.allSettled(e).then(o=>{const n=[];o.forEach(a=>{a.status==="fulfilled"&&n.push(a.value.data)}),b(n,!0)})}function rt(){const t=u(c.cart,[]),e=t.map(({id:o})=>m.get(o.trim()));Promise.allSettled(e).then(o=>{const n=[];o.forEach(a=>{a.status==="fulfilled"&&n.push(a.value.data)}),b(n,!0),v(t)})}function v(t){r.spanCartDataCount.textContent=t.reduce((e,{quantity:o})=>e+o,0).toFixed(2),r.spanCartDataPrice.textContent=t.reduce((e,{price:o,quantity:n})=>e+n*o,0).toFixed(2)}function O(){h=1,C=0}const at=async()=>{try{let t=await j();t=["All",...t],D(t)}catch(t){console.log(t)}finally{}};function S(t,e){C=Math.ceil(t.total/12),t.products.length>0?(T(),b(t.products,e),h>=C?(p(),N("We're sorry, but you've reached the end of search results.")):G(),h++):(Q(),P(),p(),y("Sorry, there are no images matching your search query.Please try again!"))}const B=async(t=!1)=>{try{const e=await K(h);S(e,t)}catch{p(),y("Error loading images from the server!")}finally{q()}},M=async(t,e=!1)=>{try{const o=await H(t,h);o.products.length===0?(P(),y(`Don't found products by ${t}!`)):T(),S(o,e)}catch{p(),y("Error loading images from the server!")}finally{q()}};function Q(){r.prodList.innerHTML=""}function P(){r.divNotFound.classList.add("not-found--visible")}function T(){r.divNotFound.classList.remove("not-found--visible")}const V=async t=>{try{const e=await U(t);R(e)}catch(e){console.log(e)}finally{}},z=async(t,e=!1)=>{try{const o=await J(t,h);o.products.length===0?(P(),y(`Don't found products by query "${t}"!`)):T(),S(o,e)}catch{p(),y("Error loading images from the server!")}finally{q()}};function w(){r.loader.style.display="block"}function q(){r.loader.style.display="none"}function G(){r.loadMoreBtn.style.display="block"}function p(){r.loadMoreBtn.style.display="none"}function Y(){r.modal.classList.toggle("modal--is-open")}let d,i,x,l;function nt(t){t.target.classList.contains("categories__btn")&&(d&&d.classList.remove("categories__btn--active"),d=t.target,d.classList.add("categories__btn--active"),O(),w(),d.textContent.toLowerCase()==="all"?B():M(d.textContent))}function st(t){p(),w(),!d||d.textContent.toLowerCase()==="all"?B(!0):M(d.textContent,!0)}function ct(t){if(!t.target.parentElement.classList.contains("products__item"))return;l=t.target.parentElement,i=l.dataset.id.trim(),x=+l.dataset.price.trim(),V(i);const e=u(c.cart,[]),o=u(c.wishlist,[]);$(e),X(o);const n=e.find(({id:a})=>a===i);n?r.productQuantity.value=n.quantity:r.productQuantity.value=0,Y()}function $(t){r.addToCartBtn.textContent=t.some(({id:e})=>e===i)?"Remove from ":"Add to cart"}function X(t){r.addToWishListBtn.textContent=t.some(e=>e===i)?"Remove from ":"Add to wishlist"}function it(t){t.preventDefault();const e=t.currentTarget.elements.searchValue.value.trim();if(Q(),w(),!e){y("Please, fill query value!"),hideLoader(),p();return}p(),w(),O(),z(e)}function ut(t){r.searchForm.elements.searchValue.value="",B()}function k(t,e=1,o=0){return{id:t,quantity:e,price:o}}function E(t){let e=u(c.cart,[]);const o=e.find(({id:n})=>n===i);return o?o.quantity=parseInt(t):e.push(k(i,1,x)),g(c.cart,e),e}function dt(){const t=parseInt(r.productQuantity.value)+1;r.productQuantity.value=t;const e=E(t);A(),$(e),window.location.pathname.includes("cart")&&v(e)}function lt(){if(parseInt(r.productQuantity.value)>1){const t=parseInt(r.productQuantity.value)-1;r.productQuantity.value=t;const e=E(t);A(),$(e),window.location.pathname.includes("cart")&&v(e)}}function pt(t){let e=u(c.cart,[]),o=0;e.find(({id:a})=>a===i)?(e=e.filter(({id:a})=>a!==i),r.addToCartBtn.textContent="Add to cart",window.location.pathname.includes("cart")&&l.remove()):(e.push(k(i,1,x)),r.addToCartBtn.textContent="Remove from cart",o=1,window.location.pathname.includes("cart")&&([...r.prodList.children].includes(l)||r.prodList.append(l))),window.location.pathname.includes("cart")&&v(e),r.productQuantity.value=o,r.spanNavCart.textContent=e.reduce((a,{quantity:s})=>a+s,0),g(c.cart,e)}function mt(t){let e=u(c.wishlist,[]);e.includes(i)?(e=e.filter(o=>o!==i),r.addToWishListBtn.textContent="Add to wishlist",window.location.pathname.includes("wishlist")&&l.remove()):(e.push(i),r.addToWishListBtn.textContent="Remove from wishlist",window.location.pathname.includes("wishlist")&&([...r.prodList.children].includes(l)||r.prodList.append(l))),r.spanNavWishList.textContent=e.length,g(c.wishlist,e)}function A(){const t=u(c.cart,[]);r.spanNavCart.textContent=t.reduce((o,{quantity:n})=>o+n,0);const e=u(c.wishlist,[]);r.spanNavWishList.textContent=e.length}function ft(t){N("Products purchased successfully!"),g(c.cart,[]),A(),setTimeout(()=>{window.location.href="/"},2e3)}function yt(){Z()}function Z(){let t="";return r.body.classList.contains("theme-light")?t="theme-dark":t="theme-light",g(c.theme,t),r.body.classList.replace(F(t),t),t}function F(t){return t==="theme-dark"?"theme-light":"theme-dark"}function tt(t){r.body.classList.contains(t)||r.body.classList.add(t),r.body.classList.remove(F(t))}function ht(){let t=u(c.theme);t===""&&(t="theme-dark"),tt(t)}export{ot as a,pt as b,mt as c,yt as d,lt as e,p as f,at as g,q as h,dt as i,B as j,nt as k,ht as l,st as m,ut as n,rt as o,ct as p,ft as q,r,it as s,Y as t,A as u};
//# sourceMappingURL=handlers-BI2kyAjX.js.map
