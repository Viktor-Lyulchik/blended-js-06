import{i as C,a as m}from"./vendor-Cbhu4xvy.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const o={catList:document.querySelector("ul.categories"),prodList:document.querySelector("ul.products"),divNotFound:document.querySelector("div.not-found"),loadMoreBtn:document.querySelector("button.load-more"),loader:document.querySelector(".loader"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),modalProduct:document.querySelector("div.modal-product"),searchForm:document.querySelector("form.search-form"),clearSearchBtn:document.querySelector("button.search-form__btn-clear"),addToCartBtn:document.querySelector("button.modal-product__btn--cart"),addToWishListBtn:document.querySelector("button.modal-product__btn--wishlist"),spanNavCart:document.querySelector("span[data-cart-count]"),spanNavWishList:document.querySelector("span[data-wishlist-count]"),spanCartDataCount:document.querySelector("span[data-count]"),spanCartDataPrice:document.querySelector("span[data-price]"),cartBuyBtn:document.querySelector("button.cart-summary__btn"),goToTopOfListBtn:document.querySelector("button.go-to-top-of-list"),changeThemeBtn:document.querySelector("button.theme-toggle-button"),body:document.querySelector("body")};function k(t){o.catList.innerHTML=t.map(e=>`<li class="categories__item">
              <button class="categories__btn" type="button">${e}</button>
            </li>`).join("")}function w(t,e=!1){const r=t.map(({id:n,title:s,brand:a,category:f,price:_,description:A,images:[M="/"]})=>`<li class="products__item" data-id="${n}">
                <img class="products__image" src="${M}" alt="${A}"/>
                <p class="products__title">${s}</p>
                <p class="products__brand"><span class="products__brand--bold">Brand:</span>${a}</p>
                <p class="products__category">Category: ${f}</p>
                <p class="products__price">Price: ${_}$</p>
             </li>`).join("");e?o.prodList.insertAdjacentHTML("beforeend",r):o.prodList.innerHTML=r}function E({title:t,tags:e,shippingInformation:r,price:n,description:s,returnPolicy:a,images:[f="/"]}){const _=`<img class="modal-product__img" src="${f}" alt="${s}" />
                <div class="modal-product__content">
                    <p class="modal-product__title">${t}</p>
                    <ul class="modal-product__tags">${e.join()}</ul>
                    <p class="modal-product__description">${s}</p>
                    <p class="modal-product__shipping-information">Shipping:${r}</p>
                    <p class="modal-product__return-policy">Return Policy:${a}</p>
                    <p class="modal-product__price">Price: ${n}$</p>
                    <button class="modal-product__buy-btn" type="button">Buy</button>
                </div>`;o.modalProduct.innerHTML=_}C.settings({position:"topRight"});function h(t){C.error({title:"Error",message:t})}function x(t){C.info({message:t})}function L(t,e){localStorage.setItem(t,JSON.stringify(e))}function d(t,e=""){const r=localStorage.getItem(t);let n=e;if(r)try{n=JSON.parse(r)}catch(s){n=e,console.error("Error restoring data from the localStorage:",s)}return n}const c={cart:"cart",wishlist:"wishlist",theme:"theme"};m.defaults.baseURL="https://dummyjson.com/products/";let y=1,b=0;async function F(){return(await m.get("category-list")).data}async function W(t,e){return(await m.get("category/"+t.trim(),{params:{limit:12,skip:(e-1)*12}})).data}async function D(t){return(await m.get(t.trim())).data}async function R(t){return(await m.get("search",{params:{q:t}})).data}async function I(t){return(await m.get("",{params:{limit:12,skip:(t-1)*12}})).data}function G(){const e=d(c.wishlist,[]).map(r=>m.get(r.trim()));Promise.allSettled(e).then(r=>{const n=[];r.forEach(s=>{s.status==="fulfilled"&&n.push(s.value.data)}),w(n,!0)})}function Y(){const e=d(c.cart,[]).map(r=>m.get(r.trim()));Promise.allSettled(e).then(r=>{const n=[];r.forEach(s=>{s.status==="fulfilled"&&n.push(s.value.data)}),w(n,!0),o.spanCartDataCount.textContent=n.length,o.spanCartDataPrice.textContent=n.reduce((s,a)=>s+a.price,0).toFixed(2)})}function q(){y=1,b=0}const X=async()=>{try{let t=await F();t=["All",...t],k(t)}catch(t){console.log(t)}finally{}};function v(t,e){b=Math.ceil(t.total/12),t.products.length>0?(P(),w(t.products,e),y>=b?(p(),x("We're sorry, but you've reached the end of search results.")):U(),y++):(N(),B(),p(),h("Sorry, there are no images matching your search query.Please try again!"))}const S=async(t=!1)=>{try{const e=await I(y);v(e,t)}catch{p(),h("Error loading images from the server!")}finally{T()}},$=async(t,e=!1)=>{try{const r=await W(t,y);r.products.length===0?(B(),h(`Don't found products by ${t}!`)):P(),v(r,e)}catch{p(),h("Error loading images from the server!")}finally{T()}};function N(){o.prodList.innerHTML=""}function B(){o.divNotFound.classList.add("not-found--visible")}function P(){o.divNotFound.classList.remove("not-found--visible")}const j=async t=>{try{const e=await D(t);E(e)}catch(e){console.log(e)}finally{}},H=async(t,e=!1)=>{try{const r=await R(t,y);r.products.length===0?(B(),h(`Don't found products by query "${t}"!`)):P(),v(r,e)}catch{p(),h("Error loading images from the server!")}finally{T()}};function g(){o.loader.style.display="block"}function T(){o.loader.style.display="none"}function U(){o.loadMoreBtn.style.display="block"}function p(){o.loadMoreBtn.style.display="none"}function J(){o.modal.classList.toggle("modal--is-open")}let l,i,u;function Z(t){t.target.classList.contains("categories__btn")&&(l&&l.classList.remove("categories__btn--active"),l=t.target,l.classList.add("categories__btn--active"),q(),g(),l.textContent.toLowerCase()==="all"?S():$(l.textContent))}function tt(t){p(),g(),!l||l.textContent.toLowerCase()==="all"?S(!0):$(l.textContent,!0)}function et(t){if(!t.target.parentElement.classList.contains("products__item"))return;u=t.target.parentElement,i=u.dataset.id.trim(),j(i);const e=d(c.cart,[]),r=d(c.wishlist,[]);o.addToCartBtn.textContent=e.includes(i)?"Remove from ":"Add to cart",o.addToWishListBtn.textContent=r.includes(i)?"Remove from ":"Add to wishlist",J()}function ot(t){t.preventDefault();const e=t.currentTarget.elements.searchValue.value.trim();if(N(),g(),!e){h("Please, fill query value!"),hideLoader(),p();return}p(),g(),q(),H(e)}function rt(t){o.searchForm.elements.searchValue.value="",S()}function st(t){let e=d(c.cart,[]);e.includes(i)?(e=e.filter(r=>r!==i),o.addToCartBtn.textContent="Add to cart",window.location.pathname.includes("index")||u.remove()):(e.push(i),o.addToCartBtn.textContent="Remove from cart",window.location.pathname.includes("index")||[...o.prodList.children].includes(u)||o.prodList.append(u)),o.spanNavCart.textContent=e.length,L(c.cart,e)}function nt(t){let e=d(c.wishlist,[]);e.includes(i)?(e=e.filter(r=>r!==i),o.addToWishListBtn.textContent="Add to wishlist",window.location.pathname.includes("index")||u.remove()):(e.push(i),o.addToWishListBtn.textContent="Remove from wishlist",window.location.pathname.includes("index")||[...o.prodList.children].includes(u)||o.prodList.append(u)),o.spanNavWishList.textContent=e.length,L(c.wishlist,e)}function K(){const t=d(c.cart,[]);o.spanNavCart.textContent=t.length;const e=d(c.wishlist,[]);o.spanNavWishList.textContent=e.length}function at(t){x("Products purchased successfully!"),L(c.cart,[]),K(),setTimeout(()=>{window.location.href="/"},2e3)}function ct(){Q()}function Q(){let t="";return o.body.classList.contains("theme-light")?t="theme-dark":t="theme-light",L(c.theme,t),o.body.classList.replace(O(t),t),t}function O(t){return t==="theme-dark"?"theme-light":"theme-dark"}function V(t){o.body.classList.contains(t)||o.body.classList.add(t),o.body.classList.remove(O(t))}function it(){let t=d(c.theme);t===""&&(t="theme-dark"),V(t)}export{G as a,st as b,nt as c,ct as d,p as e,S as f,X as g,T as h,Z as i,tt as j,rt as k,it as l,Y as m,at as n,et as p,o as r,ot as s,J as t,K as u};
//# sourceMappingURL=handlers-CdKyGlnH.js.map
