import{i as C,a as m}from"./vendor-Cbhu4xvy.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const f of s.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}})();const r={catList:document.querySelector("ul.categories"),prodList:document.querySelector("ul.products"),divNotFound:document.querySelector("div.not-found"),loadMoreBtn:document.querySelector("button.load-more"),loader:document.querySelector(".loader"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]"),modalProduct:document.querySelector("div.modal-product"),searchForm:document.querySelector("form.search-form"),clearSearchBtn:document.querySelector("button.search-form__btn-clear"),addToCartBtn:document.querySelector("button.modal-product__btn--cart"),addToWishListBtn:document.querySelector("button.modal-product__btn--wishlist"),spanNavCart:document.querySelector("span[data-cart-count]"),spanNavWishList:document.querySelector("span[data-wishlist-count]"),spanCartDataCount:document.querySelector("span[data-count]"),spanCartDataPrice:document.querySelector("span[data-price]"),cartBuyBtn:document.querySelector("button.cart-summary__btn"),goToTopOfListBtn:document.querySelector("button.go-to-top-of-list"),changeThemeBtn:document.querySelector("button.theme-toggle-button"),body:document.querySelector("body"),decreaseBtn:document.querySelector("button.decrease-btn"),increaseBtn:document.querySelector("button.increase-btn"),productQuantity:document.querySelector("input.product-quantity")};function D(t){r.catList.innerHTML=t.map(e=>`<li class="categories__item">
                 <button class="categories__btn" type="button">${e}</button>
              </li>`).join("")}function v(t,e=!1){const o=t.map(({id:n,title:a,brand:s,category:f,price:L,description:F,images:[I="/"]})=>`<li class="products__item" data-id="${n}" data-price="${L}">
                <img class="products__image" src="${I}" alt="${F}"/>
                <p class="products__title">${a}</p>
                <p class="products__brand"><span class="products__brand--bold">Brand:</span>${s}</p>
                <p class="products__category">Category: ${f}</p>
                <p class="products__price">Price: ${L}$</p>
             </li>`).join("");e?r.prodList.insertAdjacentHTML("beforeend",o):r.prodList.innerHTML=o}function W({title:t,tags:e,shippingInformation:o,price:n,description:a,returnPolicy:s,images:[f="/"]}){const L=`<img class="modal-product__img" src="${f}" alt="${a}" />
                  <div class="modal-product__content">
                      <p class="modal-product__title">${t}</p>
                      <ul class="modal-product__tags">${e.join()}</ul>
                      <p class="modal-product__description">${a}</p>
                      <p class="modal-product__shipping-information">Shipping:${o}</p>
                      <p class="modal-product__return-policy">Return Policy:${s}</p>
                      <p class="modal-product__price">Price: ${n}$</p>
                      
                  </div>`;r.modalProduct.innerHTML=L}C.settings({position:"topRight"});function y(t){C.error({title:"Error",message:t})}function N(t){C.info({message:t})}function g(t,e){localStorage.setItem(t,JSON.stringify(e))}function u(t,e=""){const o=localStorage.getItem(t);let n=e;if(o)try{n=JSON.parse(o)}catch(a){n=e,console.error("Error restoring data from the localStorage:",a)}return n}const c={cart:"cart",wishlist:"wishlist",theme:"theme"};m.defaults.baseURL="https://dummyjson.com/products/";let h=1,_=0;async function R(){return(await m.get("category-list")).data}async function j(t,e){return(await m.get("category/"+t.trim(),{params:{limit:12,skip:(e-1)*12}})).data}async function H(t){return(await m.get(t.trim())).data}async function U(t){return(await m.get("search",{params:{q:t}})).data}async function J(t){return(await m.get("",{params:{limit:12,skip:(t-1)*12}})).data}function tt(){const e=u(c.wishlist,[]).map(o=>m.get(o.trim()));Promise.allSettled(e).then(o=>{const n=[];o.forEach(a=>{a.status==="fulfilled"&&n.push(a.value.data)}),v(n,!0)})}function et(){const t=u(c.cart,[]),e=t.map(({id:o})=>m.get(o.trim()));Promise.allSettled(e).then(o=>{const n=[];o.forEach(a=>{a.status==="fulfilled"&&n.push(a.value.data)}),v(n,!0),b(t)})}function b(t){r.spanCartDataCount.textContent=t.reduce((e,{quantity:o})=>e+o,0).toFixed(2),r.spanCartDataPrice.textContent=t.reduce((e,{price:o,quantity:n})=>e+n*o,0).toFixed(2)}function O(){h=1,_=0}const ot=async()=>{try{let t=await R();t=["All",...t],D(t)}catch(t){console.log(t)}finally{}};function S(t,e){_=Math.ceil(t.total/12),t.products.length>0?(q(),v(t.products,e),h>=_?(p(),N("We're sorry, but you've reached the end of search results.")):z(),h++):(M(),B(),p(),y("Sorry, there are no images matching your search query.Please try again!"))}const P=async(t=!1)=>{try{const e=await J(h);S(e,t)}catch{p(),y("Error loading images from the server!")}finally{T()}},A=async(t,e=!1)=>{try{const o=await j(t,h);o.products.length===0?(B(),y(`Don't found products by ${t}!`)):q(),S(o,e)}catch{p(),y("Error loading images from the server!")}finally{T()}};function M(){r.prodList.innerHTML=""}function B(){r.divNotFound.classList.add("not-found--visible")}function q(){r.divNotFound.classList.remove("not-found--visible")}const K=async t=>{try{const e=await H(t);W(e)}catch(e){console.log(e)}finally{}},V=async(t,e=!1)=>{try{const o=await U(t,h);o.products.length===0?(B(),y(`Don't found products by query "${t}"!`)):q(),S(o,e)}catch{p(),y("Error loading images from the server!")}finally{T()}};function w(){r.loader.style.display="block"}function T(){r.loader.style.display="none"}function z(){r.loadMoreBtn.style.display="block"}function p(){r.loadMoreBtn.style.display="none"}function G(){r.modal.classList.toggle("modal--is-open")}let l,i,x,d;function rt(t){t.target.classList.contains("categories__btn")&&(l&&l.classList.remove("categories__btn--active"),l=t.target,l.classList.add("categories__btn--active"),O(),w(),l.textContent.toLowerCase()==="all"?P():A(l.textContent))}function at(t){p(),w(),!l||l.textContent.toLowerCase()==="all"?P(!0):A(l.textContent,!0)}function nt(t){if(!t.target.parentElement.classList.contains("products__item"))return;d=t.target.parentElement,i=d.dataset.id.trim(),x=+d.dataset.price.trim(),K(i);const e=u(c.cart,[]),o=u(c.wishlist,[]);r.addToCartBtn.textContent=e.some(({id:a})=>a===i)?"Remove from ":"Add to cart",r.addToWishListBtn.textContent=o.some(({id:a})=>a===i)?"Remove from ":"Add to wishlist";const n=e.find(({id:a})=>a===i);n&&(r.productQuantity.value=n.quantity),G()}function st(t){t.preventDefault();const e=t.currentTarget.elements.searchValue.value.trim();if(M(),w(),!e){y("Please, fill query value!"),hideLoader(),p();return}p(),w(),O(),V(e)}function ct(t){r.searchForm.elements.searchValue.value="",P()}function k(t,e=1,o=0){return{id:t,quantity:e,price:o}}function Q(t){let e=u(c.cart,[]);const o=e.find(({id:n})=>n===i);return o?o.quantity=parseInt(t):e.push(k(i,1,x)),g(c.cart,e),e}function it(){const t=parseInt(r.productQuantity.value)+1;r.productQuantity.value=t;const e=Q(t);$(),window.location.pathname.includes("cart")&&b(e)}function ut(){if(parseInt(r.productQuantity.value)>1){const t=parseInt(r.productQuantity.value)-1;r.productQuantity.value=t;const e=Q(t);$(),window.location.pathname.includes("cart")&&b(e)}}function lt(t){let e=u(c.cart,[]);e.find(({id:n})=>n===i)?(e=e.filter(({id:n})=>n!==i),r.addToCartBtn.textContent="Add to cart",window.location.pathname.includes("cart")&&d.remove()):(e.push(k(i,1,x)),r.addToCartBtn.textContent="Remove from cart",window.location.pathname.includes("cart")&&([...r.prodList.children].includes(d)||r.prodList.append(d))),r.spanNavCart.textContent=e.length,g(c.cart,e)}function dt(t){let e=u(c.wishlist,[]);e.includes(i)?(e=e.filter(o=>o!==i),r.addToWishListBtn.textContent="Add to wishlist",window.location.pathname.includes("wishlist")&&d.remove()):(e.push(i),r.addToWishListBtn.textContent="Remove from wishlist",window.location.pathname.includes("wishlist")&&([...r.prodList.children].includes(d)||r.prodList.append(d))),r.spanNavWishList.textContent=e.length,g(c.wishlist,e)}function $(){const t=u(c.cart,[]);r.spanNavCart.textContent=t.reduce((o,{quantity:n})=>o+n,0);const e=u(c.wishlist,[]);r.spanNavWishList.textContent=e.length}function pt(t){N("Products purchased successfully!"),g(c.cart,[]),$(),setTimeout(()=>{window.location.href="/"},2e3)}function mt(){Y()}function Y(){let t="";return r.body.classList.contains("theme-light")?t="theme-dark":t="theme-light",g(c.theme,t),r.body.classList.replace(E(t),t),t}function E(t){return t==="theme-dark"?"theme-light":"theme-dark"}function X(t){r.body.classList.contains(t)||r.body.classList.add(t),r.body.classList.remove(E(t))}function ft(){let t=u(c.theme);t===""&&(t="theme-dark"),X(t)}export{tt as a,lt as b,dt as c,mt as d,ut as e,p as f,ot as g,T as h,it as i,P as j,rt as k,ft as l,at as m,ct as n,et as o,nt as p,pt as q,r,st as s,G as t,$ as u};
//# sourceMappingURL=handlers-BHYZDMq4.js.map
