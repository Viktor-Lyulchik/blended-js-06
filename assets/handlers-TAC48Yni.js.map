{"version":3,"file":"handlers-TAC48Yni.js","sources":["../../src/js/refs.js","../../src/js/render-function.js","../../src/js/helpers.js","../../src/js/storage.js","../../src/js/constants.js","../../src/js/products-api.js","../../src/js/modal.js","../../src/js/handlers.js"],"sourcesContent":["'use strict';\n\n//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  catList: document.querySelector('ul.categories'),\n  prodList: document.querySelector('ul.products'),\n  divNotFound: document.querySelector('div.not-found'),\n  loadMoreBtn: document.querySelector('button.load-more'),\n  loader: document.querySelector('.loader'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  modal: document.querySelector('[data-modal]'),\n  modalProduct: document.querySelector('div.modal-product'),\n  searchForm: document.querySelector('form.search-form'),\n  clearSearchBtn: document.querySelector('button.search-form__btn-clear'),\n  addToCartBtn: document.querySelector('button.modal-product__btn--cart'),\n  addToWishListBtn: document.querySelector(\n    'button.modal-product__btn--wishlist'\n  ),\n  spanNavCart: document.querySelector('span[data-cart-count]'),\n  spanNavWishList: document.querySelector('span[data-wishlist-count]'),\n  spanCartDataCount: document.querySelector('span[data-count]'),\n  spanCartDataPrice: document.querySelector('span[data-price]'),\n  cartBuyBtn: document.querySelector('button.cart-summary__btn'),\n  goToTopOfListBtn: document.querySelector('button.go-to-top-of-list'),\n  changeThemeBtn: document.querySelector('button.theme-toggle-button'),\n  body: document.querySelector('body'),\n};\n","'use strict';\n\nimport { refs } from './refs';\n\n//Функцію для створення, рендеру або видалення розмітки\nexport function renderCategories(arrCat) {\n  refs.catList.innerHTML = arrCat\n    .map(\n      cat => `<li class=\"categories__item\">\n                 <button class=\"categories__btn\" type=\"button\">${cat}</button>\n              </li>`\n    )\n    .join('');\n}\n\nexport function renderProducts(arrProd, append = false) {\n  const markUp = arrProd\n    .map(\n      ({\n        id,\n        title,\n        brand,\n        category,\n        price,\n        description,\n        images: [img = '/'],\n      }) => `<li class=\"products__item\" data-id=\"${id}\">\n                <img class=\"products__image\" src=\"${img}\" alt=\"${description}\"/>\n                <p class=\"products__title\">${title}</p>\n                <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n                <p class=\"products__category\">Category: ${category}</p>\n                <p class=\"products__price\">Price: ${price}$</p>\n             </li>`\n    )\n    .join('');\n  if (append) {\n    refs.prodList.insertAdjacentHTML('beforeend', markUp);\n  } else {\n    refs.prodList.innerHTML = markUp;\n  }\n}\n\nexport function renderProduct({\n  title,\n  tags,\n  shippingInformation,\n  price,\n  description,\n  returnPolicy,\n  images: [img = '/'],\n}) {\n  const markUp = `<img class=\"modal-product__img\" src=\"${img}\" alt=\"${description}\" />\n                  <div class=\"modal-product__content\">\n                      <p class=\"modal-product__title\">${title}</p>\n                      <ul class=\"modal-product__tags\">${tags.join()}</ul>\n                      <p class=\"modal-product__description\">${description}</p>\n                      <p class=\"modal-product__shipping-information\">Shipping:${shippingInformation}</p>\n                      <p class=\"modal-product__return-policy\">Return Policy:${returnPolicy}</p>\n                      <p class=\"modal-product__price\">Price: ${price}$</p>\n                      <button class=\"modal-product__buy-btn\" type=\"button\">Buy</button>\n                  </div>`;\n  refs.modalProduct.innerHTML = markUp;\n}\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  position: 'topRight',\n});\n\n//Допоміжні функції\n\nexport function showErrorMsg(msg) {\n  iziToast.error({\n    title: 'Error',\n    message: msg,\n  });\n}\n\nexport function showInfoMsg(msg) {\n  iziToast.info({\n    message: msg,\n  });\n}\n","//Робота з loacalStorage\n'use strict';\n\nexport function setDataToLS(KEY, Data) {\n  localStorage.setItem(KEY, JSON.stringify(Data));\n}\n\nexport function getDataFromLS(KEY, emptyData = '') {\n  const savedData = localStorage.getItem(KEY);\n  let data = emptyData;\n  if (savedData) {\n    try {\n      data = JSON.parse(savedData);\n    } catch (error) {\n      data = emptyData;\n      console.error('Error restoring data from the localStorage:', error);\n    }\n  }\n  return data;\n}\n","'use strict';\n\n//Константи\n\nexport const STORAGE_KEYS = {\n  cart: 'cart',\n  wishlist: 'wishlist',\n  theme: 'theme',\n};\n","'use strict';\n\n// Функції для роботи з бекендом\n\nimport axios from 'axios';\nimport {\n  renderProducts,\n  renderCategories,\n  renderProduct,\n} from './render-function';\nimport { showErrorMsg, showInfoMsg } from './helpers';\nimport { refs } from './refs';\nimport { getDataFromLS, setDataToLS } from './storage';\nimport { STORAGE_KEYS } from './constants';\n\naxios.defaults.baseURL = 'https://dummyjson.com/products/';\n\nlet page = 1;\nlet totalPages = 0;\n\nexport async function getCategoryList() {\n  const response = await axios.get('category-list');\n  return response.data;\n}\n\nexport async function getProductsByCategory(category, page) {\n  const response = await axios.get('category/' + category.trim(), {\n    params: { limit: 12, skip: (page - 1) * 12 },\n  });\n  return response.data;\n}\n\nexport async function getProductById(id) {\n  const response = await axios.get(id.trim());\n  return response.data;\n}\n\nexport async function getProductsByQuery(query) {\n  const response = await axios.get('search', {\n    params: { q: query },\n  });\n  return response.data;\n}\n\nexport async function getProducts(page) {\n  const response = await axios.get('', {\n    params: { limit: 12, skip: (page - 1) * 12 },\n  });\n  return response.data;\n}\n\nexport function loadWishList() {\n  const wlArray = getDataFromLS(STORAGE_KEYS.wishlist, []);\n\n  const promises = wlArray.map(id => {\n    return axios.get(id.trim());\n  });\n\n  Promise.allSettled(promises).then(data => {\n    const products = [];\n    data.forEach(item => {\n      if (item.status === 'fulfilled') {\n        products.push(item.value.data);\n      }\n    });\n    renderProducts(products, true);\n  });\n}\n\nexport function loadCartList() {\n  const cartArray = getDataFromLS(STORAGE_KEYS.cart, []);\n\n  const promises = cartArray.map(id => {\n    return axios.get(id.trim());\n  });\n\n  Promise.allSettled(promises).then(data => {\n    const products = [];\n    data.forEach(item => {\n      if (item.status === 'fulfilled') {\n        products.push(item.value.data);\n      }\n    });\n    renderProducts(products, true);\n    refs.spanCartDataCount.textContent = products.length;\n    refs.spanCartDataPrice.textContent = products\n      .reduce((sum, item) => sum + item.price, 0)\n      .toFixed(2);\n  });\n}\n\n///////////////////////////////////\n\nexport function resetNumeration() {\n  page = 1;\n  totalPages = 0;\n}\n\nexport const getCategories = async () => {\n  try {\n    let categories = await getCategoryList();\n    // console.dir(categories); //вертає масив рядків\n    categories = ['All', ...categories];\n    renderCategories(categories);\n  } catch (error) {\n    console.log(error);\n  } finally {\n  }\n};\n\nfunction handleProducts(products, append) {\n  // console.dir(products); //вертає об'єкт у властивості products - сидить масив обєктів товарів,\n  // є поля limit = кількість товарів на сторінку, skip=індекс сторінки, total=загальна кількість товарів у виборці\n  totalPages = Math.ceil(products.total / 12);\n  if (products.products.length > 0) {\n    hideNotFound();\n    renderProducts(products.products, append);\n\n    if (page >= totalPages) {\n      hideLoadMoreButton();\n      showInfoMsg(\"We're sorry, but you've reached the end of search results.\");\n    } else {\n      showLoadMoreButton();\n    }\n    page++;\n  } else {\n    clearProductList();\n    showNotFound();\n\n    hideLoadMoreButton();\n    showErrorMsg(\n      'Sorry, there are no images matching your search query.Please try again!'\n    );\n  }\n}\n\nexport const getProductsList = async (append = false) => {\n  try {\n    const products = await getProducts(page);\n    // console.log(products);\n\n    handleProducts(products, append);\n  } catch (error) {\n    hideLoadMoreButton();\n    showErrorMsg('Error loading images from the server!');\n  } finally {\n    hideLoader();\n  }\n};\n\nexport const getNextProductsByCategory = async (category, append = false) => {\n  try {\n    const products = await getProductsByCategory(category, page);\n    // console.dir(products); //вертає масив об'єктів товарів\n    if (products.products.length === 0) {\n      showNotFound();\n      showErrorMsg(`Don't found products by ${category}!`);\n    } else {\n      hideNotFound();\n    }\n    handleProducts(products, append);\n  } catch (error) {\n    hideLoadMoreButton();\n    showErrorMsg('Error loading images from the server!');\n  } finally {\n    hideLoader();\n  }\n};\n\nexport function clearProductList() {\n  refs.prodList.innerHTML = '';\n}\n\nexport function showNotFound() {\n  refs.divNotFound.classList.add('not-found--visible');\n}\n\nexport function hideNotFound() {\n  refs.divNotFound.classList.remove('not-found--visible');\n}\n\nexport const getNextProductById = async id => {\n  try {\n    const product = await getProductById(id);\n    // console.dir(product); //вертає об'єкт товару\n    renderProduct(product);\n  } catch (error) {\n    console.log(error);\n  } finally {\n  }\n};\n\nexport const getNextProductsByQuery = async (query, append = false) => {\n  try {\n    const products = await getProductsByQuery(query, page);\n    // console.dir(products); //вертає масив об'єктів товарів\n    if (products.products.length === 0) {\n      showNotFound();\n      showErrorMsg(`Don't found products by query \"${query}\"!`);\n    } else {\n      hideNotFound();\n    }\n    handleProducts(products, append);\n  } catch (error) {\n    hideLoadMoreButton();\n    showErrorMsg('Error loading images from the server!');\n  } finally {\n    hideLoader();\n  }\n};\n\nexport function showLoader() {\n  refs.loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  refs.loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  refs.loadMoreBtn.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  refs.loadMoreBtn.style.display = 'none';\n}\n","'use strict';\nimport { refs } from './refs';\n\n//Описана робота модалки - відкриття закриття і все що з модалкою повʼязано\n\nexport function toggleModal() {\n  // is-open це клас який буде додаватися/забиратися на бекдроп при натисканні на кнопки\n  refs.modal.classList.toggle('modal--is-open');\n}\n","'use strict';\n\nimport { showErrorMsg, showInfoMsg } from './helpers';\nimport { toggleModal } from './modal';\nimport { getDataFromLS, setDataToLS } from './storage';\n\n// Функції, які передаються колбеками в addEventListners\n\nimport {\n  getProductsList,\n  getNextProductsByCategory,\n  getNextProductById,\n  showLoader,\n  hideLoadMoreButton,\n  resetNumeration,\n  getNextProductsByQuery,\n  clearProductList,\n} from './products-api';\n\nimport { refs } from './refs';\n\nimport { STORAGE_KEYS } from './constants';\n\nlet selectedCategory;\nlet query;\nexport let currentProductid;\nlet currentListItem;\n\nexport function catListOnClick(event) {\n  if (!event.target.classList.contains('categories__btn')) {\n    return;\n  }\n\n  if (selectedCategory) {\n    selectedCategory.classList.remove('categories__btn--active');\n  }\n\n  selectedCategory = event.target;\n  selectedCategory.classList.add('categories__btn--active');\n\n  resetNumeration();\n  showLoader();\n  if (selectedCategory.textContent.toLowerCase() === 'all') {\n    getProductsList();\n  } else {\n    getNextProductsByCategory(selectedCategory.textContent);\n  }\n}\n\nexport function loadMoreBtnOnClick(event) {\n  hideLoadMoreButton();\n  showLoader();\n\n  if (!query) {\n    if (\n      !selectedCategory ||\n      selectedCategory.textContent.toLowerCase() === 'all'\n    ) {\n      getProductsList(true);\n    } else {\n      getNextProductsByCategory(selectedCategory.textContent, true);\n    }\n  } else {\n    getNextProductsByQuery(query, true);\n  }\n}\n\nexport function prodListOnClick(event) {\n  if (!event.target.parentElement.classList.contains('products__item')) {\n    return;\n  }\n  currentListItem = event.target.parentElement;\n  currentProductid = currentListItem.dataset.id.trim();\n  getNextProductById(currentProductid);\n\n  const cartArray = getDataFromLS(STORAGE_KEYS.cart, []);\n  const wlArray = getDataFromLS(STORAGE_KEYS.wishlist, []);\n\n  refs.addToCartBtn.textContent = cartArray.includes(currentProductid)\n    ? 'Remove from '\n    : 'Add to ' + 'cart';\n  refs.addToWishListBtn.textContent = wlArray.includes(currentProductid)\n    ? 'Remove from '\n    : 'Add to ' + 'wishlist';\n\n  toggleModal();\n}\n\nexport function searchFormOnSubmit(event) {\n  event.preventDefault();\n\n  const query = event.currentTarget.elements.searchValue.value.trim();\n\n  clearProductList();\n  showLoader();\n\n  if (!query) {\n    showErrorMsg('Please, fill query value!');\n\n    hideLoader();\n    hideLoadMoreButton();\n    return;\n  }\n\n  hideLoadMoreButton();\n  showLoader();\n  resetNumeration();\n\n  getNextProductsByQuery(query);\n}\n\nexport function clearSearchBtnOnClick(event) {\n  refs.searchForm.elements.searchValue.value = '';\n  getProductsList();\n}\n\nexport function addToCartBtnOnClick(event) {\n  let cartArray = getDataFromLS(STORAGE_KEYS.cart, []);\n\n  if (!cartArray.includes(currentProductid)) {\n    cartArray.push(currentProductid);\n    refs.addToCartBtn.textContent = 'Remove from cart';\n\n    if (window.location.pathname.includes('cart')) {\n      if (![...refs.prodList.children].includes(currentListItem)) {\n        refs.prodList.append(currentListItem);\n      }\n    }\n  } else {\n    cartArray = cartArray.filter(item => item !== currentProductid);\n    refs.addToCartBtn.textContent = 'Add to cart';\n\n    if (window.location.pathname.includes('cart')) {\n      currentListItem.remove();\n    }\n  }\n\n  refs.spanNavCart.textContent = cartArray.length;\n  setDataToLS(STORAGE_KEYS.cart, cartArray);\n}\n\nexport function addToWishListBtnOnClick(event) {\n  let wlArray = getDataFromLS(STORAGE_KEYS.wishlist, []);\n\n  if (!wlArray.includes(currentProductid)) {\n    wlArray.push(currentProductid);\n    refs.addToWishListBtn.textContent = 'Remove from wishlist';\n\n    // console.log(window.location.pathname);\n\n    if (window.location.pathname.includes('wishlist')) {\n      if (![...refs.prodList.children].includes(currentListItem)) {\n        refs.prodList.append(currentListItem);\n      }\n    }\n  } else {\n    wlArray = wlArray.filter(item => item !== currentProductid);\n    refs.addToWishListBtn.textContent = 'Add to wishlist';\n\n    if (window.location.pathname.includes('wishlist')) {\n      currentListItem.remove();\n    }\n  }\n  refs.spanNavWishList.textContent = wlArray.length;\n  setDataToLS(STORAGE_KEYS.wishlist, wlArray);\n}\n\nexport function updateStatusesOfLists() {\n  const cartArray = getDataFromLS(STORAGE_KEYS.cart, []);\n  refs.spanNavCart.textContent = cartArray.length;\n  const wlArray = getDataFromLS(STORAGE_KEYS.wishlist, []);\n  refs.spanNavWishList.textContent = wlArray.length;\n}\n\nexport function cartBuyBtnOnClick(event) {\n  showInfoMsg('Products purchased successfully!');\n  setDataToLS(STORAGE_KEYS.cart, []);\n  updateStatusesOfLists();\n\n  setTimeout(() => {\n    window.location.href = '/'; //go to main page\n  }, 2000);\n}\n\nexport function changeThemeBtnOnClick() {\n  // console.log(refs.body);\n\n  toggleTheme();\n  // console.log(refs.body.classList);\n}\n\nexport function toggleTheme() {\n  let currentTheme = '';\n  if (refs.body.classList.contains('theme-light')) {\n    currentTheme = 'theme-dark';\n  } else {\n    currentTheme = 'theme-light';\n  }\n  setDataToLS(STORAGE_KEYS.theme, currentTheme);\n\n  refs.body.classList.replace(oppositeTheme(currentTheme), currentTheme);\n  return currentTheme;\n}\n\nfunction oppositeTheme(theme) {\n  return theme === 'theme-dark' ? 'theme-light' : 'theme-dark';\n}\n\nexport function setTheme(theme) {\n  if (!refs.body.classList.contains(theme)) {\n    refs.body.classList.add(theme);\n  }\n  refs.body.classList.remove(oppositeTheme(theme));\n}\n\nexport function loadSavedTheme() {\n  let savedTheme = getDataFromLS(STORAGE_KEYS.theme);\n  if (savedTheme === '') {\n    savedTheme = 'theme-dark';\n  }\n  setTheme(savedTheme);\n}\n"],"names":["refs","renderCategories","arrCat","cat","renderProducts","arrProd","append","markUp","id","title","brand","category","price","description","img","renderProduct","tags","shippingInformation","returnPolicy","iziToast","showErrorMsg","msg","showInfoMsg","setDataToLS","KEY","Data","getDataFromLS","emptyData","savedData","data","error","STORAGE_KEYS","axios","page","totalPages","getCategoryList","getProductsByCategory","getProductById","getProductsByQuery","query","getProducts","loadWishList","promises","products","item","loadCartList","sum","resetNumeration","getCategories","categories","handleProducts","hideNotFound","hideLoadMoreButton","showLoadMoreButton","clearProductList","showNotFound","getProductsList","hideLoader","getNextProductsByCategory","getNextProductById","product","getNextProductsByQuery","showLoader","toggleModal","selectedCategory","currentProductid","currentListItem","catListOnClick","event","loadMoreBtnOnClick","prodListOnClick","cartArray","wlArray","searchFormOnSubmit","clearSearchBtnOnClick","addToCartBtnOnClick","addToWishListBtnOnClick","updateStatusesOfLists","cartBuyBtnOnClick","changeThemeBtnOnClick","toggleTheme","currentTheme","oppositeTheme","theme","setTheme","loadSavedTheme","savedTheme"],"mappings":"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"}